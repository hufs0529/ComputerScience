# 양방향, 단방향


## 연관관계 정의 규칙
### 연관 관계를 매핑할 때, 생각해야 할 것은 크게 3가지가 있다.
- 방향 : 단방향, 양방향 (객체 참조)
- 연관 관계의 주인 : 양방향일 때, 연관 관계에서 관리 주체
- 다중성 : 다대일(N:1), 일대다(1:N), 일대일(1:1), 다대다(N:M)

## 양방향, 단방향 
- 데이터베이스 테이블은 ```외래키``` '하나'로 양쪽 테이블 조인이 가능하다
- 하지만 객체는 ```참조용 필드```가 있는 개체만 다른 객체를 참조하는 것이 가능
- 두 객체 사이에 하나의 객체만 참조용 필드를 갖고 참조하면 단방향 관계, 두 객체 모두가 각각 참조용 필드를 갖고 참조하면 양방향 관계라고 한다
- 엄밀히 말하면 ```양방향↔️``` 관계는 없고, 두 객체가 단방향 참조를 ```각각```가져서 양방향 관계처럼 사용하는 것이다

## 양방향의 단점
- 객체 입장에서 양방향 맵핑시 복잡해질 수 있다
- 서비스에서 사용자(Member)는 굉장히 많은 entity와 관계를 갖는다
- 다른 엔티티들고 불필요한 연관 관계 맵핑으로 복잡성이 증가할 수 있다
- ``` 기본적으로 단방향 매핑으로 하고 나중에 역방향으로 객체 탐색이 꼭 필요하다고 느낄 때 추가```

## 연관관계의 주인
- 두 객체의 양방향 관계시, 연관 관계의 주인을 지정해야 한다
- 두 단방향 관계중, 제어의 권한```(테이블 값을 저장, 수정 등)```을 갖는 실질적인 관계가 어떤 것인지 JPA에게 알려주는 역할
- 연관 관계의 주인이 아닌 객체에서 ```mappedBy``` 속성을 사용해서 주인을 지정해야 한다
- ```외래 키가 있는 곳을 연관관계의 주인```으로 지정!!!

## 왜 지정해야하는가?
- 게시글(Post)의 게시판을 다른 게시판(Board)으로 수정하려고 할 때, Post 객체에서 setBoard(...) 같은 메소드를 이용해서 수정하는게 맞는지, Board객체에서 getPosts() 같은 메소드를 이용해서 List의 게시글을 수정하는게 맞는지 헷갈릴 수 있다
-  즉, Post에서 Board를 수정할 때 FK(Foreign Key)를 수정할 지, Board에서 Post를 수정할 때 FK(Foreign Key)를 수정할 지를 결정해야 한다

## 다중성
#### ```DB```를 기준으로 다중성을 결정한다
    일대다 ↔ 다대일
    일대일 ↔ 일대일
    다대다 ↔ 다대다




[참고][https://jeong-pro.tistory.com/231]

